# [Linux] Bash trap の使い方: シグナルを捕捉する

## Overview
`trap` コマンドは、シェルスクリプト内で特定のシグナルやイベントを捕捉し、それに対して指定したコマンドを実行するために使用されます。これにより、スクリプトが異常終了するのを防ぎ、クリーンアップ処理を行うことができます。

## Usage
基本的な構文は以下の通りです。

```bash
trap [コマンド] [シグナル]
```

## Common Options
- `EXIT`: スクリプトが終了する際に実行されるコマンドを指定します。
- `SIGINT`: Ctrl+C によって送信される割り込みシグナルを捕捉します。
- `SIGTERM`: プロセス終了のために送信されるシグナルを捕捉します。

## Common Examples

### 1. スクリプト終了時のクリーンアップ
スクリプトが終了する際に特定のコマンドを実行する例です。

```bash
trap 'echo "スクリプトが終了しました。"' EXIT
echo "処理中..."
```

### 2. Ctrl+C での割り込み処理
Ctrl+C が押されたときにメッセージを表示する例です。

```bash
trap 'echo "割り込みが発生しました。"' SIGINT
while true; do
    sleep 1
done
```

### 3. プロセス終了時の処理
SIGTERM シグナルを捕捉して、終了メッセージを表示する例です。

```bash
trap 'echo "プロセスが終了しました。"' SIGTERM
while true; do
    sleep 1
done
```

## Tips
- `trap` を使用することで、スクリプトの信頼性を高めることができます。
- 複数のシグナルを同時に捕捉することも可能です。例えば、`trap 'echo "終了"' SIGINT SIGTERM` のように指定できます。
- スクリプトのデバッグ時には、`trap 'echo "エラー発生"' ERR` を使用してエラーを捕捉することが便利です。