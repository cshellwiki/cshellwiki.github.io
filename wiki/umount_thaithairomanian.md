# [Linux] Bash umount: [unmount file systems]

## Overview
คำสั่ง `umount` ใช้ในการยกเลิกการเชื่อมต่อระบบไฟล์จากระบบปฏิบัติการ ซึ่งช่วยให้สามารถปล่อยทรัพยากรที่ถูกใช้โดยระบบไฟล์นั้นๆ และป้องกันการสูญหายของข้อมูลเมื่อมีการถอดอุปกรณ์ออก

## Usage
คำสั่ง `umount` มีรูปแบบพื้นฐานดังนี้:
```
umount [options] [arguments]
```

## Common Options
- `-a`: ยกเลิกการเชื่อมต่อทุกระบบไฟล์ที่ระบุในไฟล์ `/etc/mtab`
- `-r`: ยกเลิกการเชื่อมต่อระบบไฟล์และทำการ mount ใหม่ในโหมดอ่านอย่างเดียว
- `-f`: ยกเลิกการเชื่อมต่อระบบไฟล์อย่างบังคับ (force)
- `-v`: แสดงรายละเอียดเพิ่มเติมในระหว่างการทำงาน

## Common Examples
1. ยกเลิกการเชื่อมต่อระบบไฟล์ที่ระบุ:
   ```bash
   umount /mnt/mydrive
   ```

2. ยกเลิกการเชื่อมต่อทุกระบบไฟล์:
   ```bash
   umount -a
   ```

3. ยกเลิกการเชื่อมต่อระบบไฟล์อย่างบังคับ:
   ```bash
   umount -f /mnt/mydrive
   ```

4. ยกเลิกการเชื่อมต่อระบบไฟล์ในโหมดอ่านอย่างเดียว:
   ```bash
   umount -r /mnt/mydrive
   ```

## Tips
- ตรวจสอบให้แน่ใจว่าไม่มีโปรเซสใดๆ ที่กำลังใช้งานระบบไฟล์ก่อนที่จะใช้คำสั่ง `umount` เพื่อหลีกเลี่ยงข้อผิดพลาด
- ใช้คำสั่ง `lsof` เพื่อตรวจสอบว่าไฟล์ใดบ้างที่ยังเปิดอยู่ในระบบไฟล์ที่ต้องการยกเลิกการเชื่อมต่อ
- หากคุณพบปัญหาในการยกเลิกการเชื่อมต่อ ลองใช้ตัวเลือก `-f` แต่ควรใช้ด้วยความระมัดระวังเพื่อป้องกันการสูญหายของข้อมูล