# [לינוקס] Bash trap שימוש: ניהול סיגנלים בתהליכים

## Overview
הפקודה `trap` ב-Bash משמשת לניהול סיגנלים בתהליכים. היא מאפשרת להגדיר פעולות שיבוצעו כאשר תהליך מקבל סיגנל מסוים, כמו SIGHUP או SIGINT. זה שימושי במיוחד לניהול סגירה נקייה של תהליכים או לביצוע פעולות לפני שהסקריפט מסתיים.

## Usage
התחביר הבסיסי של הפקודה הוא:

```bash
trap [options] [commands] [signals]
```

## Common Options
- `-l`: מציג רשימה של כל הסיגנלים הזמינים.
- `-p`: מציג את הפקודות הנוכחיות שהוגדרו עבור הסיגנלים.

## Common Examples

### דוגמה 1: סגירה נקייה של תהליך
```bash
trap 'echo "תהליך נסגר"; exit' SIGINT
```
בדוגמה זו, כאשר המשתמש לוחץ על Ctrl+C, הפקודה תדפיס "תהליך נסגר" לפני שהסקריפט יסתיים.

### דוגמה 2: ניקוי קבצים זמניים
```bash
trap 'rm -f /tmp/mytempfile; echo "ניקוי קבצים זמניים"' EXIT
```
כאן, כאשר הסקריפט מסתיים (בכל סיבה שהיא), הקובץ הזמני נמחק וההודעה "ניקוי קבצים זמניים" מודפסת.

### דוגמה 3: טיפול בסיגנל SIGHUP
```bash
trap 'echo "חיבור נותק"' SIGHUP
```
אם חיבור הטרמינל נותק, הפקודה תדפיס "חיבור נותק".

## Tips
- השתמש ב-trap כדי להבטיח שהסקריפטים שלך יסגרו בצורה מסודרת, גם במקרה של שגיאות או סיגנלים בלתי צפויים.
- כדאי להגדיר trap עבור סיגנלים נפוצים כמו SIGINT ו-SIGTERM כדי למנוע אובדן נתונים.
- זכור לבדוק את הסיגנלים הזמינים באמצעות `trap -l` כדי להבין אילו סיגנלים ניתן לנהל.