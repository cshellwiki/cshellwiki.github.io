# [لینوکس] Bash trap استفاده: مدیریت سیگنال‌ها و خروجی‌ها

## Overview
دستورات `trap` در Bash به شما این امکان را می‌دهد که به سیگنال‌ها و رویدادهای خاصی که در حین اجرای اسکریپت‌ها رخ می‌دهند، پاسخ دهید. این دستور به شما کمک می‌کند تا رفتار اسکریپت‌های خود را در زمان دریافت سیگنال‌ها یا در زمان خروج از اسکریپت کنترل کنید.

## Usage
سینتکس پایه دستور `trap` به شکل زیر است:

```bash
trap [options] [commands] [signals]
```

## Common Options
- `-l`: لیست سیگنال‌های قابل استفاده را نمایش می‌دهد.
- `-p`: دستورات trap فعلی را نمایش می‌دهد.
- `commands`: دستورات یا توابعی که باید در زمان دریافت سیگنال اجرا شوند.
- `signals`: سیگنال‌هایی که باید به آن‌ها پاسخ داده شود (مانند `SIGINT`, `SIGTERM`).

## Common Examples

### مثال ۱: استفاده از trap برای مدیریت SIGINT
در این مثال، ما می‌خواهیم وقتی کاربر Ctrl+C را فشار می‌دهد، یک پیام نمایش داده شود:

```bash
trap 'echo "Ctrl+C pressed. Exiting..."; exit' SIGINT
while true; do
    echo "Running..."
    sleep 1
done
```

### مثال ۲: استفاده از trap برای تمیز کردن منابع
در این مثال، ما می‌خواهیم وقتی اسکریپت به هر دلیلی متوقف می‌شود، یک فایل موقتی حذف شود:

```bash
temp_file="/tmp/tempfile.txt"
trap 'rm -f "$temp_file"; echo "Temporary file removed."' EXIT
touch "$temp_file"
echo "Temporary file created."
sleep 10
```

### مثال ۳: نمایش سیگنال‌های موجود
برای نمایش لیست سیگنال‌های قابل استفاده، می‌توانید از گزینه `-l` استفاده کنید:

```bash
trap -l
```

## Tips
- همیشه از `trap` برای مدیریت سیگنال‌ها در اسکریپت‌های طولانی یا حساس استفاده کنید تا از بروز مشکلات جلوگیری کنید.
- می‌توانید چندین سیگنال را در یک دستور `trap` مشخص کنید تا به چندین سیگنال پاسخ دهید.
- استفاده از `trap` با `EXIT` به شما این امکان را می‌دهد که در زمان خروج از اسکریپت، کارهای تمیزکاری انجام دهید.